language: ruby

jdk: oraclejdk8

env:
  global:
    secure: "NCkU3f60cn5Gmzq+NwDmKdQSq+ApF/rPqSHPirk1+ZPW9n+H9912meUuJr9qyn03MPdc6wAQinsl3skdPNh1Qz02TI/WZGMiCQTLh3nKIMzaaxx6I+OZ1TV7A4MoJMQ7oYQdXdbvRYXpOVRnfVDxpUC+BDk2T8xmjfm9cht+PGTzM6RxpmSL842hiudkcyxHxgEf66EGpi6h2G2PqYNfQrksqiVMWlLiTO5a2ee+iw9qTMhgKrhEKLCb+dFB56gtKIOpd3MxieLwf3PDcsjM+TSaWo6Bp+mjdA3zGJNz5wbWRVSdrIvKvxmf3eRqAGssBhBDO/LUN3LnI+/T/7J9XZZd7WXNudo/t6HQXhJkUIvOucCxSg8/uRsxrMAmF2zkJOnYGSvN3HNqdzyz86TK4/Xckl+gX51b0uYncHfZYSojn4py1RWPYpX/L2RHbzMn1MJ7B3/VZ21vY97aHhDgNyyAMxPnTAuR1IZicEgA8y8AmZkkK9tWq5wvAOKI91V+W8iBEaO2dZIib+KdJSUUj/Q3TM3i4wX9O/AU7tknsnCApvxQeveELJ4SxfFd/Z2imqmQWM0wIgp1u7Vjguf8kSaxcuQHonZNdwvvYOkbYxHvUqltzlmE1qFC/kQe6o9fS3NuiugHCYVeFs+LXVVW+nl0pWztFYMicUmQq7T781w="

before_install:
  - |
    # Currently, Travis can't treat jruby 9.0.1.0
    if [[ ${TRAVIS_RUBY_VERSION} = "jruby-9.0.5.0" ]];then
      rvm get head
      rvm use jruby-9.0.5.0 --install
      ruby -v
      gem i bundler
    fi

rvm: jruby-9.0.5.0

gemfile:
  - gemfiles/embulk-0.6.0-latest
  - gemfiles/embulk-0.6.13
  - gemfiles/embulk-0.6.14
  - gemfiles/embulk-0.6.15
  - gemfiles/embulk-0.6.16
  - gemfiles/embulk-0.6.17
  - gemfiles/embulk-0.6.18
  - gemfiles/embulk-0.6.19
  - gemfiles/embulk-0.6.20
  - gemfiles/embulk-0.6.21
  - gemfiles/embulk-0.6.22
  - gemfiles/embulk-0.6.23
  - gemfiles/embulk-0.6.24
  - gemfiles/embulk-0.6.25
  - gemfiles/embulk-0.6.26
  - gemfiles/embulk-0.6.27
  - gemfiles/embulk-0.7.0
  - gemfiles/embulk-0.7.0-latest
  - gemfiles/embulk-0.7.1
  - gemfiles/embulk-0.7.2
  - gemfiles/embulk-0.7.3
  - gemfiles/embulk-0.7.4
  - gemfiles/embulk-0.7.5
  - gemfiles/embulk-latest

matrix:
  exclude:
    - jdk: oraclejdk8 # Ignore all matrix at first, use `include` to allow build
  include:
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.0-latest}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.13}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.14}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.15}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.16}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.17}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.18}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.19}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.20}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.21}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.22}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.23}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.24}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.25}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.26}
    - {rvm: jruby-19mode, gemfile: gemfiles/embulk-0.6.27}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.0}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.0-latest}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.1}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.2}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.3}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.4}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-0.7.5}
    - {rvm: jruby-9.0.0.0, gemfile: gemfiles/embulk-latest}
    

  allow_failures:
    # Ignore failure for *-latest
    - gemfile: embulk-0.6.0-latest
    - gemfile: embulk-0.7.0-latest
    - gemfile: embulk-latest
    
